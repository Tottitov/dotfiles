#!/bin/sh

sessions=$(zellij ls -ns)

[ -n "$sessions" ] && choice=$(echo "$sessions" | fuzzel -w 25 -di) || exit 1
session=$(echo "$choice" | cut -d' ' -f1)

select="$(printf "attach\nrename\ndelete" | fuzzel -l 3 -w 10 -di)" || exit 1

case "$select" in
delete)
	zellij d --force "$session"
	notify-send -u critical "Zellij" "Deleted session $session"
	;;
rename)
	rename=$(fuzzel -w 30 -di --prompt-only="rename: ") || exit 1
	zellij --session "$session" ac rename-session "$rename"
	;;
attach)
	$TERMINAL zellij a "$session" &
	notify-send "Zellij" "Attached session $session"
	;;
esac
